!function e(t,i,n){function o(r,a){if(!i[r]){if(!t[r]){var l="function"==typeof require&&require;if(!a&&l)return l(r,!0);if(s)return s(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var h=i[r]={exports:{}};t[r][0].call(h.exports,function(e){var i=t[r][1][e];return o(i?i:e)},h,h.exports,e,t,i,n)}return i[r].exports}for(var s="function"==typeof require&&require,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(e,t,i){var n,o=Backbone.$;n=Marionette.Application.extend({onBeforeStart:function(){return window.location.origin!==window.parent.location.origin?void console.error("The Canvas has a different origin than the Sidebar"):void(window.parent.app?this.registerRemoteChannel():o(window.parent.document).on("DOMContentLoaded readystatechange load",this.registerRemoteChannel.bind(this)))},onStart:function(){this.allowableEvents=["canvas:dragstart","canvas:drag","canvas:dragend","history:restore","history:undo","history:redo","modal:apply","css:add","css:delete","css:update","css:clear","sidebar:setting:change","template:load"],this.addEventListeners()},addEventListeners:function(){var e=this,t=function(){e.channel.trigger("canvas:reset")};document.addEventListener("click",t,!1),document.addEventListener("dragover",t,!1),window.addEventListener("resize",t,!1),o("a").attr({draggable:!1,target:"_blank"}),o("img").attr({draggable:!1}),o(document).on("keydown",function(t){t.ctrlKey&&89==t.keyCode&&(_.contains(["INPUT","SELECT","TEXTAREA"],t.target.tagName)||e.channel.trigger("history:redo"))}),o(document).on("keydown",function(t){t.ctrlKey&&90==t.keyCode&&(_.contains(["INPUT","SELECT","TEXTAREA"],t.target.tagName)||e.channel.trigger("history:undo"))})},registerRemoteChannel:function(){var e=parent.app.channel,t=function(t){return e.request("sidebar:library",t)};this.channel.reply("sidebar:library",t),this.listenTo(e,"all",this.forwardRemoteEvent),e.trigger("canvas:initialize")},forwardRemoteEvent:function(e){var t=_.contains(this.allowableEvents,e);t&&this.channel.trigger.apply(this.channel,arguments)}}),t.exports=n},{}],2:[function(e,t,i){!function(t){"use strict";t.Container=e("./components/behaviors/container"),t.Draggable=e("./components/behaviors/draggable"),t.Droppable=e("./components/behaviors/droppable"),t.Editable=e("./components/behaviors/editable"),t.Movable=e("./components/behaviors/movable"),Marionette.Behaviors.behaviorsLookup=function(){return t},window.Tailor.Behaviors=t}(window.Tailor.Behaviors||{})},{"./components/behaviors/container":9,"./components/behaviors/draggable":10,"./components/behaviors/droppable":11,"./components/behaviors/editable":12,"./components/behaviors/movable":13}],3:[function(e,t,i){!function(t){"use strict";t.TailorSection=e("./components/elements/wrappers/view-section"),t.TailorBox=e("./components/elements/wrappers/view-box"),t.TailorCard=e("./components/elements/wrappers/view-card"),t.TailorHero=e("./components/elements/wrappers/view-hero"),t.TailorColumn=e("./components/elements/children/view-column"),t.TailorTab=e("./components/elements/children/view-tab"),t.TailorToggle=e("./components/elements/children/view-toggle"),t.TailorListItem=e("./components/elements/children/view-list-item"),t.TailorCarouselItem=e("./components/elements/children/view-carousel-item"),t.TailorTabs=e("./components/elements/containers/view-tabs"),t.TailorCarousel=e("./components/elements/containers/view-carousel"),t.Element=e("./components/elements/view-element"),t.Container=e("./components/elements/view-container"),t.Wrapper=e("./components/elements/view-container"),t.Child=e("./components/elements/view-container"),t.lookup=function(e,i){return e=e.replace(/_/g," ").replace(/(?: |\b)(\w)/g,function(e){return e.toUpperCase().replace(/\s+/g,"")}),t.hasOwnProperty(e)?t[e]:i&&(i=i.replace(/_/g," ").replace(/(?: |\b)(\w)/g,function(e){return e.toUpperCase().replace(/\s+/g,"")}),t.hasOwnProperty(i))?t[i]:t.Element},window.Tailor.Views=t}(window.Tailor.Views||{})},{"./components/elements/children/view-carousel-item":16,"./components/elements/children/view-column":17,"./components/elements/children/view-list-item":18,"./components/elements/children/view-tab":19,"./components/elements/children/view-toggle":20,"./components/elements/containers/view-carousel":25,"./components/elements/containers/view-tabs":26,"./components/elements/view-container":27,"./components/elements/view-element":28,"./components/elements/wrappers/view-box":29,"./components/elements/wrappers/view-card":30,"./components/elements/wrappers/view-hero":31,"./components/elements/wrappers/view-section":32}],4:[function(e,t,i){!function(t){"use strict";t.Container=e("./entities/models/elements/model-container"),t.Wrapper=e("./entities/models/elements/model-wrapper"),t.Child=e("./entities/models/elements/model-child"),t.Element=e("./entities/models/elements/element"),t.Section=e("./entities/models/elements/wrappers/section"),t.Row=e("./entities/models/elements/containers/row"),t.Column=e("./entities/models/elements/children/column"),t.GridItem=e("./entities/models/elements/children/grid-item"),t.Tabs=e("./entities/models/elements/containers/tabs"),t.Carousel=e("./entities/models/elements/containers/carousel"),t.lookup=function(e,i){return e=e.replace(/tailor_/g," ").replace(/_/g," ").replace(/(?: |\b)(\w)/g,function(e){return e.toUpperCase().replace(/\s+/g,"")}),t.hasOwnProperty(e)?t[e]:(i=i.replace(/_/g," ").replace(/(?: |\b)(\w)/g,function(e){return e.toUpperCase().replace(/\s+/g,"")}),t.hasOwnProperty(i)?t[i]:t.Element)},window.Tailor.Models=t}(window.Tailor.Models||{})},{"./entities/models/elements/children/column":42,"./entities/models/elements/children/grid-item":43,"./entities/models/elements/containers/carousel":44,"./entities/models/elements/containers/row":45,"./entities/models/elements/containers/tabs":46,"./entities/models/elements/element":47,"./entities/models/elements/model-child":49,"./entities/models/elements/model-container":51,"./entities/models/elements/model-wrapper":52,"./entities/models/elements/wrappers/section":53}],5:[function(e,t,i){Tailor.Objects=Tailor.Objects||{},function(t,i,n){"use strict";var o=document.getElementById("tailor-custom-page-css"),s=o.innerHTML,r=[],a=function(){var e="";for(var i in r)if(r.hasOwnProperty(i)){var n=r[i],a=t.CSS.parseSelectors(n.selectors),l=t.CSS.parseDeclarations(n.declarations);e+="\n"+a+" {"+l+"}"}e=s+e,o.innerHTML=e};i.Setting("_post_title",function(e,t){n("h1, h2, h1 a, h2 a").each(function(){t==this.textContent&&(this.textContent=e)})}),i.Setting("_tailor_page_css",function(e,t){s=e,a()}),i.Setting("_tailor_section_width",function(e,t){var i=e.replace(/[0-9]/g,""),n=e.replace(i,"");n?(r.sectionWidth={selectors:[".tailor-section .tailor-section__content"],declarations:{"max-width":n+i}},a()):r.sectionWidth&&(delete r.sectionWidth,a())}),i.Setting("_tailor_element_spacing",function(e,t){var i=e.replace(/[a-z]/g,""),n=e.replace(/[0-9]/g,"");i?(r.elementSpacing={selectors:[".tailor-element"],declarations:{"margin-bottom":i+n}},a()):r.elementSpacing&&(delete r.elementSpacing,a())}),i.Setting("_tailor_column_spacing",function(e,t){var i=e.replace(/[a-z]/g,"")/2,n=e.replace(/[0-9]/g,"");i?(r.columnSpacing={selectors:[".tailor-element.tailor-row .tailor-column"],declarations:{"padding-left":i+n,"padding-right":i+n}},r.rowMargin={selectors:[".tailor-element.tailor-row"],declarations:{"margin-left":-i+n,"margin-right":-i+n}},a()):r.columnSpacing&&(delete r.columnSpacing,delete r.rowMargin,a())}),_.extend(t.Objects,{Carousel:e("./components/carousel"),PostsCarousel:e("./components/carousel-simple"),Tabs:e("./components/tabs"),Toggles:e("./components/toggles"),Map:e("./components/map"),Masonry:e("./components/masonry"),Slideshow:e("./components/slideshow"),Lightbox:e("./components/lightbox")}),i.Element.onRender("tailor_section",function(e,t){var n=this;i.Setting("_tailor_section_width",function(e,t){n.triggerAll("element:parent:change",n)})}),i.Element.onRender("tailor_column",function(e,t){var n=this;i.Setting("_tailor_column_spacing",function(e,t){n.triggerAll("element:parent:change",n)})}),i.Element.onRender("tailor_carousel",function(e,t){var n=this,o={autoplay:"1"==e.autoplay,arrows:"1"==e.arrows,dots:!1,fade:"1"==e.fade&&"1"==e.items_per_row,slidesToShow:parseInt(e.items_per_row,10)||1,adaptiveHeight:!0};n.$el.tailorCarousel(o),i.Setting("_tailor_element_spacing",function(e,t){n.triggerAll("element:parent:change",n)})}),i.Element.onRender("tailor_posts",function(e,t){var i,n=this.$el;"carousel"==e.layout?(i={autoplay:"1"==e.autoplay,arrows:"1"==e.arrows,dots:"1"==e.dots,fade:"1"==e.fade&&"1"==e.items_per_row,infinite:!1,slidesToShow:parseInt(e.items_per_row,10)||2},this.$el.tailorSimpleCarousel(i)):e.masonry&&n.tailorMasonry()}),i.Element.onRender("tailor_gallery",function(e,t){var i,o=this.$el;"carousel"==e.layout?(i={autoplay:"1"==e.autoplay,arrows:"1"==e.arrows,dots:"1"==e.dots,fade:"1"==e.fade&&"1"==e.items_per_row,infinite:!1,slidesToShow:parseInt(e.items_per_row,10)||2},o.tailorSimpleCarousel(i)):"slideshow"==e.layout?(i={autoplay:"1"==e.autoplay,arrows:"1"==e.arrows,dots:!1,fade:!0,items:".tailor-slideshow__slide",adaptiveHeight:!0,draggable:!1,speed:250},"1"==e.thumbnails&&(i.customPaging=function(e,t){var i=n(e.$slides[t]).data("thumb");return'<img class="slick-thumbnail" src="'+i+'">'},i.dots=!0),o.tailorSlideshow(i)):e.masonry&&o.tailorMasonry(),this.el.classList.contains("is-lightbox-gallery")&&o.tailorLightbox({disableOn:function(){return o.hasClass("is-selected")}})}),i.Element.onRender("tailor_content",function(e,t){this.$el.tailorLightbox({disableOn:function(){return $el.hasClass("is-selected")}})}),i.Element.onRender("tailor_tabs",function(e,t){this.$el.tailorTabs()}),i.Element.onRender("tailor_toggles",function(e,t){this.$el.tailorToggles()}),i.Element.onRender("tailor_map",function(e,t){this.$el.tailorGoogleMap()})}(window.Tailor,window.Tailor.Api,jQuery)},{"./components/carousel":15,"./components/carousel-simple":14,"./components/lightbox":33,"./components/map":34,"./components/masonry":35,"./components/slideshow":36,"./components/tabs":37,"./components/toggles":38}],6:[function(e,t,i){e("./utility/polyfills/classlist"),e("./utility/polyfills/raf");var n=e("./apps/canvas");window.app=new n,window.Tailor={Api:{Setting:e("./components/api/setting"),Element:e("./components/api/element")},CSS:e("./utility/css")},window.ajax=e("./utility/ajax"),function(t,i){"use strict";e("./canvas-behaviors"),e("./canvas-components"),e("./canvas-entities"),e("./canvas-preview"),null==document.getElementById("canvas")||null==document.getElementById("select")?console.error("The page canvas could not be initialized.  This could be caused by a plugin or theme conflict."):(t.addRegions({canvasRegion:{selector:"#canvas",regionClass:e("./modules/canvas/canvas-region")},selectRegion:{selector:"#select",regionClass:e("./modules/tools/select-region")}}),t.on("before:start",function(){t.module("entities:canvas",e("./entities/canvas"))}),t.on("start",function(){t.module("module:canvas",e("./modules/canvas")),t.module("module:tools",e("./modules/tools")),t.module("module:stylesheet",e("./modules/stylesheet"))})),i(document).ready(function(){t.start({elements:window._elements||[],nonces:window._nonces||[],l10n:window._l10n||[],mediaQueries:window._media_queries||{},cssRules:window._css_rules||{}})})}(window.app,jQuery)},{"./apps/canvas":1,"./canvas-behaviors":2,"./canvas-components":3,"./canvas-entities":4,"./canvas-preview":5,"./components/api/element":7,"./components/api/setting":8,"./entities/canvas":39,"./modules/canvas":54,"./modules/canvas/canvas-region":55,"./modules/stylesheet":57,"./modules/tools":59,"./modules/tools/select-region":60,"./utility/ajax":64,"./utility/css":65,"./utility/polyfills/classlist":66,"./utility/polyfills/raf":67}],7:[function(e,t,i){var n={render:[],destroy:[]},o=function(e,t,i){n.hasOwnProperty(e)&&"function"==typeof i&&(n[e][t]=n[e][t]||[],n[e][t].push(i))},s=function(e,t){var i=e.model,o=i.get("tag");t=t||i.get("atts"),n.render[o]&&_.each(n.render[o],function(n){n.apply(e,[t,i])})},r=function(e){var t=e.model,i=t.get("tag");n.destroy[i]&&_.each(n.destroy[i],function(i){i.apply(e,[t.get("atts"),t])})};window.app.listenTo(app.channel,"element:ready element:refresh",s),window.app.listenTo(app.channel,"element:destroy",r),t.exports={onRender:function(e,t){o("render",e,t)},onDestroy:function(e,t){o("destroy",e,t)}}},{}],8:[function(e,t,i){var n={},o=function(e){var t=e.get("id");n[t]&&_.each(n[t],function(t){t.apply(app,[e.get("value"),e.previous("value")])})};app.listenTo(app.channel,"sidebar:setting:change",o),t.exports=function(e,t){"function"==typeof t&&(n[e]=n[e]||[],n[e].push(t))}},{}],9:[function(e,t,i){t.exports=Marionette.Behavior.extend({events:{"container:add":"addChildView","container:remove":"removeChildView"},modelEvents:{"container:collapse":"onCollapse"},addChildView:function(e,t){if(t!==this.view){var i=this.view.$childViewContainer?this.view.$childViewContainer:this.$el,n=i.children().filter(":not( .tailor-column__helper )").index(t.$el);this.view._updateIndices(t,!0,n),this.view.proxyChildEvents(t),this.view.children.add(t,t.model.get("order")),t._parent=this,this.view.triggerAll("element:child:add",this.view,!1),e.stopPropagation()}},removeChildView:function(e,t){t!==this.view&&(this.view.stopListening(t),this.view.children.remove(t,t.model.get("order")),this.view._updateIndices(t,!1),delete t._parent,t.$el.detach(),this.view.triggerAll("element:child:remove",this.view,!1),e.stopPropagation())},onCollapse:function(e,t){var i,n,o=this.view,s=o.$el.index();_.each(t,function(e){i=this.view.children.findByModel(e),n=o.el.parentNode.children,i.$el.insertAfter(n[s]),s++,o.stopListening(i),o.children.remove(i),o._updateIndices(i,!1),delete i._parent,i.$el.trigger("container:add",i)},this),o.$el.trigger("container:remove",o),o.destroy()}})},{}],10:[function(e,t,i){t.exports=Marionette.Behavior.extend({events:{dragstart:"onDragStart",dragend:"onDragEnd",drag:"onDrag"},onDragStart:function(e){app.channel.trigger("canvas:dragstart",e.originalEvent,this.view)},onDrag:function(e){app.channel.trigger("canvas:drag",e.originalEvent,this.view)},onDragEnd:function(e){app.channel.trigger("canvas:dragend",e.originalEvent,this.view)}})},{}],11:[function(e,t,i){t.exports=Marionette.Behavior.extend({events:{dragover:"onDragOver",drop:"onDrop"},onDragOver:function(e){app.channel.trigger("canvas:dragover",e.originalEvent,this.view)},onDrop:function(e){app.channel.trigger("canvas:drop",e.originalEvent,this.view)}})},{}],12:[function(e,t,i){t.exports=Marionette.Behavior.extend({events:{mouseover:"onMouseOver",mouseout:"onMouseOut",click:"onClick"},modelEvents:{select:"selectElement"},collectionEvents:{edit:"onEdit"},onRender:function(){this.view.el.title="Shift-click to edit this element"},onClick:function(e){e.shiftKey?this.editElement():this.selectElement(),e.preventDefault(),e.stopPropagation()},onMouseOver:function(e){this.view.$el.addClass("is-hovering"),e.stopPropagation()},onMouseOut:function(e){this.view.$el.removeClass("is-hovering"),e.stopPropagation()},editElement:function(){app.channel.trigger("modal:open",this.view.model)},selectElement:function(){app.channel.trigger("canvas:select",this.view)},onEdit:function(e,t){this.view.$el.toggleClass("is-editing",e===this.view.model&&t)}})},{}],13:[function(e,t,i){t.exports=Marionette.Behavior.extend({modelEvents:{"add:child":"addChild","remove:child":"removeChild","insert:before":"insertBefore","insert:after":"insertAfter",insert:"insert",append:"append"},insert:function(e){e.trigger("append",this.view)},addChild:function(){this.view.$el.trigger("container:add",this.view)},removeChild:function(){this.view.$el.trigger("container:remove",this.view)},insertBefore:function(e){this.view.$el.insertBefore(e.$el)},insertAfter:function(e){this.view.$el.insertAfter(e.$el)},triggerEvent:function(e){e.$el.trigger("before:element:child:add",this.view)},append:function(e){var t=e.$childViewContainer?e.$childViewContainer:e.$el;this.view.$el.appendTo(t)}})},{}],14:[function(e,t,i){var n,o=window.jQuery;n=function(e,t,i){this.el=e,this.$el=o(e),this.$wrap=this.$el.find(".tailor-carousel__wrap").first(),this.options=o.extend({},this.defaults,t),document.documentElement.dir&&"rtl"==document.documentElement.dir&&(this.options.rtl=!0),this.callbacks=o.extend({},this.callbacks,i),this.initialize()},n.prototype={defaults:{items:".tailor-carousel__item",prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="Previous" tabindex="0" role="button"></button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button"></button>',adaptiveHeight:!0,draggable:!1,speed:250,slidesToShow:1,slidesToScroll:1,autoplay:!1,arrows:!1,dots:!0,fade:!1},callbacks:{onInitialize:function(){},onDestroy:function(){}},initialize:function(){this.slick(this.addEventListeners),"function"==typeof this.callbacks.onInitialize&&this.callbacks.onInitialize.call(this)},addEventListeners:function(){this.$el.on("before:element:refresh",o.proxy(this.unSlick,this)).on("element:change:parent",o.proxy(this.maybeRefreshSlick,this)).on("before:element:copy",o.proxy(this.unSlick,this)).on("element:copy",o.proxy(this.slick,this)).on("before:element:destroy",o.proxy(this.maybeDestroy,this)).on("element:parent:change",o.proxy(this.maybeRefreshSlick,this))},maybeSlick:function(e){e.target==this.el&&this.slick()},maybeRefreshSlick:function(e){e.target==this.el&&this.refreshSlick()},maybeUnSlick:function(e){e.target==this.el&&this.unSlick()},maybeDestroy:function(e){e.target==this.el&&this.destroy(e)},slick:function(e){var t=this;this.$el.imagesLoaded(function(){t.$wrap.slick(t.options),"function"==typeof e&&e.call(t)})},refreshSlick:function(){this.$wrap.slick("refresh")},unSlick:function(){this.$wrap.slick("unslick")},destroy:function(){this.$el.off(),this.unSlick(),"function"==typeof this.callbacks.onDestroy&&this.callbacks.onDestroy.call(this)}},o.fn.tailorSimpleCarousel=function(e,t){return this.each(function(){var i=o.data(this,"tailorSimpleCarousel");i||o.data(this,"tailorSimpleCarousel",new n(this,e,t))})}},{}],15:[function(e,t,i){var n,o=window.jQuery;n=function(e,t,i){this.el=e,this.$el=o(e),this.$wrap=this.$el.find(".tailor-carousel__wrap").first(),this.options=o.extend({},this.defaults,t),document.documentElement.dir&&"rtl"==document.documentElement.dir&&(this.options.rtl=!0),this.callbacks=o.extend({},this.callbacks,i),this.initialize()},n.prototype={defaults:{items:".tailor-carousel__item",prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="Previous" tabindex="0" role="button"></button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button"></button>',adaptiveHeight:!1,draggable:!1,speed:250,slidesToShow:1,slidesToScroll:1,initialSlide:0,autoplay:!1,arrows:!1,dots:!1,fade:!1,infinite:!1},callbacks:{onInitialize:function(){},onDestroy:function(){}},initialize:function(){this.slickAt(0,this.addEventListeners),"function"==typeof this.callbacks.onInitialize&&this.callbacks.onInitialize.call(this)},addEventListeners:function(){this.$el.on("before:element:refresh",o.proxy(this.maybeUnSlick,this)).on("element:refresh",o.proxy(this.refreshSlick,this)).on("element:change:parent",o.proxy(this.maybeRefreshSlick,this)).on("before:element:copy",o.proxy(this.maybeUnSlick,this)).on("element:copy",o.proxy(this.maybeSlick,this)).on("element:parent:change",o.proxy(this.maybeRefreshSlick,this)).on("before:element:destroy",o.proxy(this.maybeDestroy,this)).on("before:element:child:ready",o.proxy(this.maybeUnSlick,this)).on("element:child:ready",o.proxy(this.onReadyChild,this)).on("element:child:add",o.proxy(this.refreshSlick,this)).on("element:child:remove",o.proxy(this.onDestroyDescendant,this)).on("before:element:child:refresh",o.proxy(this.maybeUnSlick,this)).on("element:child:refresh",o.proxy(this.maybeSlick,this)).on("before:element:change:order",o.proxy(this.maybeUnSlick,this)).on("element:change:order",o.proxy(this.onReorderChild,this)).on("before:element:child:destroy",o.proxy(this.maybeUnSlick,this)).on("element:child:destroy",o.proxy(this.onDestroyChild,this)).on("element:descendant:add",o.proxy(this.refreshSlick,this)).on("element:descendant:remove",o.proxy(this.refreshSlick,this)).on("element:descendant:ready",o.proxy(this.refreshSlick,this)).on("element:descendant:destroy",o.proxy(this.onDestroyDescendant,this))},querySelectors:function(){this.$dots&&this.$dots.off();var e=this;if(e.$items=e.$wrap.find(" > "+e.options.items),e.$dots=e.$el.children(".slick-dots").find(" > li"),e.$dots.on("click",function(t){var i=o(t.currentTarget);e.currentSlide=i.data("id"),e.$wrap.slick("slickGoTo",i.index()),t.preventDefault()}),!e.currentSlide){var t=e.$items.filter(function(){return this.classList.contains("slick-current")});e.currentSlide=t.length?t.id:e.$items[0].id}},updateDots:function(e){this.$dots.each(function(t,i){e==t?i.classList.add("slick-active"):i.classList.remove("slick-active")}),this.$dots.toggle(this.$dots.length/this.options.slidesToShow>1)},onReadyChild:function(e,t){e.target==this.el?this.slickAt(t.$el.index()):this.refreshSlick()},onReorderChild:function(e,t,i,n){if(e.target===this.el){this.querySelectors();var o=this.$items.filter(function(){return this.id==t});0>n-i?o.insertAfter(this.$items[i]):o.insertBefore(this.$items[i]),this.slickAt(i)}},onDestroyChild:function(e,t){var i=t.$el.index();t.$el.remove(),this.slickAt(i)},onDestroyDescendant:function(e,t){t.$el.detach(),this.refreshSlick()},maybeSlick:function(e){e.target==this.el&&this.slick()},maybeRefreshSlick:function(e){e.target==this.el&&this.refreshSlick()},maybeUnSlick:function(e){e.target==this.el&&this.unSlick()},maybeDestroy:function(e){e.target==this.el&&this.destroy(e)},slickAt:function(e,t){this.querySelectors();var i=this.$items.length;if(i){e=Math.min(e,i-1),e<this.options.slidesToShow&&(e=0);var n=this.$items[e];this.currentSlide=n.id,this.slick(t),this.updateDots(e)}},slick:function(e){var t=this,i=this.currentSlide,n=this.$dots.filter(function(){return this.getAttribute("data-id")==i}).index(),s=o.extend({},this.options,{autoplay:!1,fade:!1,initialSlide:n});t.$wrap.slick(s).on("beforeChange",function(e,i,n,o){i.$slider[0]==t.$wrap[0]&&n!=o&&t.updateDots(o)}),"function"==typeof e&&e.call(t)},refreshSlick:function(){this.$wrap.slick("refresh")},unSlick:function(){this.$wrap.slick("unslick")},destroy:function(){this.$el.off(),this.unSlick(),"function"==typeof this.callbacks.onDestroy&&this.callbacks.onDestroy.call(this)}},o.fn.tailorCarousel=function(e,t){return this.each(function(){var i=o.data(this,"tailorCarousel");i||o.data(this,"tailorCarousel",new n(this,e,t))})}},{}],16:[function(e,t,i){var n,o=e("./../view-container");n=o.extend({onRenderTemplate:function(){this.el.draggable=!1,this.el.id=this.model.cid}}),t.exports=n},{"./../view-container":27}],17:[function(e,t,i){var n,o=e("./../view-container");n=o.extend({ui:{sizer:".tailor-column__sizer"},events:{"mousedown @ui.sizer":"onResize"},modelEvents:{"change:atts":"onChangeAttributes","change:width":"onChangeWidth"},onRenderCollection:function(){this.updateClassName(this.model.get("atts").width),this.$el.attr("draggable",!0).prepend('<div class="tailor-column__helper"><div class="tailor-column__sizer"></div></div>')},onResize:function(e){function t(e){document.body.classList.add("is-resizing"),document.body.style.cursor="col-resize";var t=n.el.getBoundingClientRect(),i=_.clone(o.get("atts")),r=_.clone(s.get("atts")),a=parseInt(i.width),l=parseInt(r.width),c=Math.round((e.clientX-t.left)/t.width*a);1>c||c+1>a+l||c==a||(i.width=c,r.width=l-(c-a),o.set("atts",i,{silent:!0}),s.set("atts",r,{silent:!0}),o.trigger("change:width",o,i.width),s.trigger("change:width",s,r.width))}function i(e){document.removeEventListener("mousemove",t,!1),document.removeEventListener("mouseup",i,!1),document.body.classList.remove("is-resizing"),document.body.style.cursor="default",r!=o.get("atts").width&&app.channel.trigger("element:resize",o)}var n=this,o=n.model,s=o.collection.findWhere({parent:o.get("parent"),order:o.get("order")+1}),r=o.get("atts").width;return document.addEventListener("mousemove",t,!1),document.addEventListener("mouseup",i,!1),app.channel.trigger("canvas:reset"),!1},onChangeWidth:function(e,t){this.updateClassName(t),this.triggerAll("element:parent:change",this)},updateClassName:function(e){this.$el.removeClass(function(e,t){return(t.match(/(^|\s)columns-\S+/g)||[]).join(" ")}),this.el.classList.add("columns-"+e)}}),t.exports=n},{"./../view-container":27}],18:[function(e,t,i){var n,o=e("./../view-container");n=o.extend({childViewContainer:".tailor-list__content"}),t.exports=n},{"./../view-container":27}],19:[function(e,t,i){var n,o=e("./../view-container");n=o.extend({onRenderTemplate:function(){this.el.draggable=!1,this.el.id=this.model.cid}}),t.exports=n},{"./../view-container":27}],20:[function(e,t,i){var n,o=e("./../view-container");n=o.extend({childViewContainer:".tailor-toggle__body"}),t.exports=n},{"./../view-container":27}],21:[function(e,t,i){t.exports=Marionette.ItemView.extend({tagName:"li",attributes:function(){return{"data-id":this.model.cid}},getTemplate:function(){return _.template('<button data-role="none" role="button" aria-required="false" tabindex="0"></button>')}})},{}],22:[function(e,t,i){t.exports=Marionette.CollectionView.extend({tagName:"ul",className:"slick-dots",childView:e("./navigation-carousel-item"),events:{dragstart:"onDragStart"},onDragStart:function(e){app.channel.trigger("canvas:reset"),e.stopPropagation()},onRender:function(){var e=this;this.sortable=new Sortable(e.el,{draggable:"li",animation:150,onUpdate:function(t){var i=e.$el.parent();i.trigger("before:element:change:order"),i.trigger("element:change:order",[t.item.getAttribute("data-id"),t.newIndex,t.oldIndex]),app.channel.trigger("element:change:order",e.model)}})},buildChildView:function(e,t,i){var n=_.extend({model:e,collection:this.collection},i);return new t(n)},filter:function(e,t,i){return e.get("parent")===this.model.get("id")},onBeforeDestroy:function(){this.sortable.destroy()}})},{"./navigation-carousel-item":21}],23:[function(e,t,i){t.exports=Marionette.ItemView.extend({tagName:"li",className:function(){return"tailor-tabs__navigation-item tailor-"+this.model.get("id")},modelEvents:{"change:atts":"onChangeAttributes"},attributes:function(){return{"data-id":this.model.cid}},getTemplate:function(){return _.template('<%= title || "Tab" %>')},serializeData:function(){var e=Marionette.ItemView.prototype.serializeData.apply(this,arguments),t=this.model.get("atts");return e.title=t.title,e},onChangeAttributes:function(e,t){this.el.innerHTML=t.title||"Tab"}})},{}],24:[function(e,t,i){t.exports=Marionette.CollectionView.extend({childView:e("./navigation-tab"),events:{dragstart:"onDragStart"},onDragStart:function(e){app.channel.trigger("canvas:reset"),e.stopPropagation()},buildChildView:function(e,t,i){var n=_.extend({model:e,collection:this.collection},i);return new t(n)},filter:function(e,t,i){return e.get("parent")===this.model.get("id")},onRender:function(){var e=this;this.sortable=new Sortable(e.el,{draggable:".tailor-tabs__navigation-item",animation:150,onUpdate:function(t){var i=e.$el.parent();i.trigger("before:element:change:order"),i.trigger("element:change:order",[t.item.getAttribute("data-id"),t.newIndex,t.oldIndex]),app.channel.trigger("element:change:order",e.model)}})},onBeforeDestroy:function(){this.sortable.destroy()}})},{"./navigation-tab":23}],25:[function(e,t,i){var n,o=e("./../view-container");n=o.extend({childViewContainer:".tailor-carousel__wrap",events:{"element:change:order":"onReorderElement"},onReorderElement:function(e,t,i,n){0>i-n?this.children.each(function(e){e._index>=i&&e._index<=n&&(e._index==n?e._index=i:e._index++,e.model.set("order",e._index))},this):this.children.each(function(e){e._index>=n&&e._index<=i&&(e._index==n?e._index=i:e._index--,e.model.set("order",e._index))},this),this.model.collection.sort()},onBeforeRenderTemplate:function(){this.navigation&&this.navigation.triggerMethod("destroy")},onRenderTemplate:function(){var t=e("./navigation/navigation-carousel");this.navigation=new t({model:this.model,collection:this.collection,sort:!1}),this.$el.append(this.navigation.render().el)},onBeforeDestroy:function(){this.triggerAll("before:element:destroy",this),this.navigation.triggerMethod("destroy")}}),t.exports=n},{"./../view-container":27,"./navigation/navigation-carousel":22}],26:[function(e,t,i){var n,o=e("./../view-container");n=o.extend({ui:{navigation:".tailor-tabs__navigation"},childViewContainer:".tailor-tabs__content",events:{"element:change:order":"onReorderElement"},onReorderElement:function(e,t,i,n){0>i-n?this.children.each(function(e){e._index>=i&&e._index<=n&&(e._index==n?e._index=i:e._index++,e.model.set("order",e._index))},this):this.children.each(function(e){e._index>=n&&e._index<=i&&(e._index==n?e._index=i:e._index--,e.model.set("order",e._index))},this),this.model.collection.sort()},onBeforeRenderTemplate:function(){this.navigation&&this.navigation.triggerMethod("destroy")},onRenderTemplate:function(){var t=e("./navigation/navigation-tabs");this.navigation=new t({el:this.ui.navigation,model:this.model,collection:this.collection,sort:!1}),this.navigation.render()},childRefreshed:function(e){e.el.id=e.model.cid,e.el.classList.add("is-active"),this.triggerAll("element:child:refresh",e)},onBeforeDestroy:function(){this.triggerAll("before:element:destroy",this),this.navigation.triggerMethod("destroy")}}),t.exports=n},{"./../view-container":27,"./navigation/navigation-tabs":24}],27:[function(e,t,i){var n;window.jQuery;n=Marionette.CompositeView.extend({behaviors:{Container:{},Draggable:{},Droppable:{},Editable:{},Movable:{}},initialize:function(){this._isReady=!1,this._isBeingDestroyed=!1,this.addEventListeners()},addEventListeners:function(){this.listenTo(app.channel,"before:elements:restore",this.onBeforeDestroy)},getChildView:function(e){return window.Tailor.Views.lookup(e.get("tag"),e.get("type"))},buildChildView:function(e,t,i){var n=_.extend({model:e,collection:this.collection},i);return new t(n)},filter:function(e,t,i){return e.get("parent")===this.model.get("id")},attachElContent:function(e){var t=jQuery(e);return this.$el.replaceWith(t),this.setElement(t),this.el.setAttribute("draggable",!0),this},getTemplateId:function(){return"tmpl-tailor-"+this.model.get("id")},getTemplate:function(){var e,t=document.querySelector("#"+this.getTemplateId());return t?(e=_.template(t.innerHTML),t.parentElement.removeChild(t)):(t=document.querySelector("#tmpl-tailor-"+this.model.get("tag")+"-default"),e=_.template(t.innerHTML)),e},updateTemplate:function(e){var t=this.getTemplateId(),i=document.querySelector("#"+t);i||(i=document.createElement("script"),i.setAttribute("type","text/html"),i.id=t,document.body.appendChild(i)),i.innerHTML=e},renderTemplate:function(){this._ensureViewIsIntact();var e=this.getChildViewContainer(this),t=e.contents().detach();return this.resetChildViewContainer(),this._renderTemplate(),e=this.getChildViewContainer(this),e.append(t),this},_updateIndices:function(e,t,i){t&&(e._index=i,e.model._changing=!1,e.model.set("order",i)),this.children.each(function(i){i._index>=e._index&&(i._index+=t?1:-1,i.model.set("order",i._index))},this)},onBeforeRender:function(){this.triggerAll("before:element:ready",this)},onDomRefresh:function(){this.el.setAttribute("draggable",!0),this.$el.find("a").attr({draggable:!1,target:"_blank"}),this.$el.find("img").attr({draggable:!1})},onBeforeDestroy:function(){this.triggerAll("before:element:destroy",this)},onDestroy:function(){this.triggerAll("element:destroy",this)},modelEvents:{"change:atts":"onChangeAttributes","change:parent":"onChangeParent"},onChangeAttributes:function(e,t){e=this.model.toJSON(),e.atts=t?t:{};var i=this,n={data:{model:JSON.stringify(e),
	nonce:window._nonces.render},success:function(e){i.updateTemplate(e.html),app.channel.trigger("css:update",i.model.get("id"),e.css)},error:function(){i.updateTemplate("The template for "+i.cid+" could not be refreshed")},complete:function(){var t=i.$el.hasClass("is-editing"),n=i.$el.hasClass("is-selected");i.$el.removeClass("is-rendering"),i.triggerAll("before:element:refresh",i,e.atts),i.renderTemplate(),i.triggerAll("element:refresh",i,e.atts),i.refreshChildren(),t&&i.$el.addClass("is-editing"),n&&i.$el.addClass("is-selected")}};i.el.classList.add("is-rendering"),window.ajax.send("tailor_render",n)},onChangeParent:function(){this.triggerAll("element:change:parent",this),this.refreshChildren()},childEvents:{"before:element:ready":"beforeChildElementReady","element:ready":"childElementReady","before:element:refresh":"beforeChildElementRefreshed","element:refresh":"childElementRefreshed","before:element:destroy":"beforeChildElementDestroyed","element:destroy":"childElementDestroyed"},beforeChildElementReady:function(e){this._isReady&&this.triggerAll("before:element:child:ready",e)},childElementReady:function(e){if(this._isReady)this.triggerAll("element:child:ready",e);else{var t=this.children.filter(function(e){return e._isReady}).length;this.children.length==t&&(this._isReady=!0,this.triggerAll("element:ready",this),this.refreshChildren())}},beforeChildElementRefreshed:function(e){this.triggerAll("before:element:child:refresh",e)},childElementRefreshed:function(e){this.triggerAll("element:child:refresh",e)},beforeChildElementDestroyed:function(e){this._isBeingDestroyed||this.triggerAll("before:element:child:destroy",e)},childElementDestroyed:function(e){!this._isBeingDestroyed&&this.children.length>1&&this.triggerAll("element:child:destroy",e)},onElementParentChange:function(){this.refreshChildren()},onElementChildDestroy:function(){this.refreshChildren()},events:{"element:parent:change":"stopEventPropagation","before:element:ready":"stopEventPropagation","element:ready":"stopEventPropagation","before:element:refresh":"stopEventPropagation","element:refresh":"stopEventPropagation","before:element:destroy":"stopEventPropagation","element:destroy":"stopEventPropagation","before:element:copy":"stopEventPropagation","element:copy":"stopEventPropagation","element:child:add":"onDescendantAdded","element:child:remove":"onDescendantRemoved","before:element:child:ready":"stopEventPropagation","element:child:ready":"onDescendantReady","before:element:child:refresh":"stopEventPropagation","element:child:refresh":"stopEventPropagation","before:element:child:destroy":"stopEventPropagation","element:child:destroy":"onDescendantDestroyed"},onDescendantAdded:function(e,t){if(this._isReady)this.triggerAll("element:descendant:add",t),e.stopPropagation();else{var i=this.children.filter(function(e){return e._isReady}).length;this.children.length==i&&(this._isReady=!0,this.triggerAll("element:ready",this)),e.stopImmediatePropagation()}},onDescendantRemoved:function(e,t){("container"==this.model.get("type")&&this.children.length>1||this.children.length>0)&&this.triggerAll("element:descendant:remove",t),e.stopPropagation()},onDescendantReady:function(e,t){this._isReady?(this.triggerAll("element:descendant:add",t),this.refreshChildren(),e.stopPropagation()):(1==this.children.length&&this.children.contains(t)&&(this._isReady=!0,this.triggerAll("element:ready",this)),e.stopImmediatePropagation())},onDescendantDestroyed:function(e,t){("container"==this.model.get("type")&&this.children.length>1||this.children.length>0)&&this.triggerAll("element:descendant:destroy",t),e.stopPropagation()},refreshChildren:function(){this.children.each(function(e){e.triggerAll("element:parent:change",e)},this)},triggerAll:function(e,t,i){this.$el.trigger(e,t),this.triggerMethod(e,t),i?app.channel.trigger(e,this,i):app.channel.trigger(e,this)},stopEventPropagation:function(e){e.stopPropagation()}}),t.exports=n},{}],28:[function(e,t,i){var n,o=window.jQuery;n=Marionette.ItemView.extend({className:"element",attributes:{draggable:!0},behaviors:{Draggable:{},Droppable:{},Editable:{},Movable:{}},modelEvents:{"change:atts":"onChangeAttributes","change:parent":"onChangeParent"},initialize:function(){this._isReady=!1,this._isBeingDestroyed=!1,this.addEventListeners()},addEventListeners:function(){this.listenTo(app.channel,"before:elements:restore",this.onBeforeDestroy)},getTemplateId:function(){return"tmpl-tailor-"+this.model.get("id")},getTemplate:function(){var e,t=document.querySelector("#"+this.getTemplateId());return t?(e=_.template(t.innerHTML),t.parentElement.removeChild(t)):(t=document.querySelector("#tmpl-tailor-"+this.model.get("tag")+"-default"),e=_.template(t.innerHTML)),e},attachElContent:function(e){var t=o(e);return this.$el.replaceWith(t),this.setElement(t),this.el.setAttribute("draggable",!0),this},updateTemplate:function(e){var t=this.getTemplateId(),i=document.querySelector("#"+t);i||(i=document.createElement("script"),i.setAttribute("type","text/html"),i.id=t,document.body.appendChild(i)),i.innerHTML=e},onChangeAttributes:function(e,t){var i=this;e=this.model.toJSON(),t&&(e.atts=t);var n={data:{model:JSON.stringify(e),nonce:window._nonces.render},success:function(e){i.updateTemplate(e.html),app.channel.trigger("css:update",i.model.get("id"),e.css)},error:function(e){i.updateTemplate("The template for "+i.cid+" could not be refreshed")},complete:function(){var t=i.$el.hasClass("is-editing"),n=i.$el.hasClass("is-selected");i.$el.removeClass("is-rendering"),i.triggerAll("before:element:refresh",i,e.atts),i.render(),i.triggerAll("element:refresh",i,e.atts),t&&i.$el.addClass("is-editing"),n&&i.$el.addClass("is-selected")}};i.el.classList.add("is-rendering"),window.ajax.send("tailor_render",n)},onChangeParent:function(){this.triggerAll("element:change:parent",this)},onBeforeRender:function(){this.triggerAll("before:element:ready",this)},onDomRefresh:function(){var e=this;this.el.setAttribute("draggable",!0),this.$el.find("a").attr({draggable:!1,target:"_blank"}),this.$el.find("img").attr({draggable:!1}),this.$el.imagesLoaded(function(){e._isReady=!0,e.triggerAll("element:ready",e)})},onBeforeDestroy:function(){this.triggerAll("before:element:destroy",this)},onDestroy:function(){this.triggerAll("element:destroy",this)},triggerAll:function(e,t,i){this.$el.trigger(e,t),this.triggerMethod(e,t),i?app.channel.trigger(e,this,i):app.channel.trigger(e,this)}}),t.exports=n},{}],29:[function(e,t,i){var n,o=e("./../view-container");n=o.extend({childViewContainer:".tailor-box__content"}),t.exports=n},{"./../view-container":27}],30:[function(e,t,i){var n,o=e("./../view-container");n=o.extend({childViewContainer:".tailor-card__content"}),t.exports=n},{"./../view-container":27}],31:[function(e,t,i){var n,o=e("./../view-container");n=o.extend({childViewContainer:".tailor-hero__content"}),t.exports=n},{"./../view-container":27}],32:[function(e,t,i){var n,o=e("./../view-container");n=o.extend({attributes:{draggable:!0},modelEvents:{"change:atts":"onChangeAttributes"},childViewContainer:".tailor-section__content"}),t.exports=n},{"./../view-container":27}],33:[function(e,t,i){var n,o=window.jQuery;n=function(e,t,i){this.el=e,this.$el=o(e),this.options=o.extend({},this.defaults,this.$el.data(),t),this.callbacks=o.extend({},this.callbacks,i),this.initialize()},n.prototype={defaults:{type:"image",delegate:".is-lightbox-image",closeMarkup:'<button title="%title%" type="button" class="not-a-button mfp-close">&#215;</button>',gallery:{enabled:!0,arrowMarkup:'<button title="%title%" type="button" class="not-a-button mfp-arrow mfp-arrow-%dir%"></button>'},image:{titleSrc:function(e){return e.el.find("figcaption").text()}}},callbacks:{onInitialize:function(){},onDestroy:function(){}},initialize:function(){this.magnificPopup(),this.addEventListeners(),"function"==typeof this.callbacks.onInitialize&&this.callbacks.onInitialize.call(this)},addEventListeners:function(){this.$el.on("before:element:destroy",o.proxy(this.destroy,this))},magnificPopup:function(){this.$el.magnificPopup(this.options)},destroy:function(e){e.target==this.el&&(this.$el.off(),"function"==typeof this.callbacks.onDestroy&&this.callbacks.onDestroy.call(this))}},o.fn.tailorLightbox=function(e,t){return this.each(function(){var i=o.data(this,"tailorLightbox");i||o.data(this,"tailorLightbox",new n(this,e,t))})}},{}],34:[function(e,t,i){var n,o=window.jQuery;n=function(e,t,i){this.el=e,this.$el=o(e),this.$win=o(window),this.options=o.extend({},this.defaults,this.$el.data(),t),this.callbacks=o.extend({},this.callbacks,i),this.initialize()},n.prototype={defaults:{height:450,address:"",latitude:"",longitude:"",zoom:12,draggable:1,scrollwheel:0,controls:0,hue:null,saturation:0},callbacks:{onInitialize:function(){},onDestroy:function(){}},getStyles:function(e,t){return[{featureType:"all",elementType:"all",stylers:[{saturation:e?e:null},{hue:t?t:null}]},{featureType:"water",elementType:"all",stylers:[{hue:t?t:null},{saturation:e?e:null},{lightness:50}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"simplified"}]}]},initialize:function(){var e=this;this.markers=[],this.infoWindows=[],this.$canvas=this.$el.find(".tailor-map__canvas").height(this.options.height),this.getCoordinates(this.options).then(function(t){e.center=t;var i=e.options.controls,n={zoom:e.options.zoom,draggable:e.options.draggable,scrollwheel:e.options.scrollwheel,center:t,mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!i,panControl:i,rotateControl:i,scaleControl:i,zoomControl:i,mapTypeControl:i,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.TOP_CENTER}},o=e.getStyles(e.options.saturation,e.options.hue);e.map=new google.maps.Map(e.$canvas[0],n),e.map.mapTypes.set("map_style",new google.maps.StyledMapType(o,{name:"Styled Map"})),e.map.setMapTypeId("map_style"),e.setupMarkers(e.$el,e.map),e.addEventListeners(),"function"==typeof e.callbacks.onInitialize&&e.callbacks.onInitialize.call(e)})},addEventListeners:function(){this.$el.on("element:change:parent",o.proxy(this.refresh,this)).on("before:element:destroy",o.proxy(this.maybeDestroy,this)).on("element:parent:change",o.proxy(this.refresh,this)),this.$win.on("resize",o.proxy(this.refresh,this))},maybeRefresh:function(e){e.target==this.el&&this.refresh()},refresh:function(){google.maps.event.trigger(this.map,"resize"),this.map.setCenter(this.center)},maybeDestroy:function(e){e.target==this.el&&this.destroy()},getCoordinates:function(e){return o.Deferred(function(t){if("undefined"==typeof google)t.reject(new Error("The Google Maps API is currently unavailable"));else if(""!=e.address){var i=new google.maps.Geocoder;i.geocode({address:e.address},function(i,n){google.maps.GeocoderStatus.OK==n?t.resolve(i[0].geometry.location):e.latitude&&e.longitude?t.resolve(new google.maps.LatLng(e.latitude,e.longitude)):t.reject(new Error(n))})}else e.latitude&&e.longitude?t.resolve(new google.maps.LatLng(e.latitude,e.longitude)):t.reject(new Error("No address or map coordinates provided"))}).promise()},setupMarkers:function(e,t){var i=this;this.$el.find(".tailor-map__marker").each(function(e,n){var s={address:"",latitude:"",longitude:"",image:""},r=_.extend({},s,o(n).data());i.getCoordinates(r).then(function(o){i.markers[e]=new google.maps.Marker({map:t,position:o,infoWindowIndex:e,icon:r.image}),"null"!=n.innerHTML&&(i.infoWindows[e]=new google.maps.InfoWindow({content:n.innerHTML}),google.maps.event.addListener(i.markers[e],"click",function(){n.innerHTML&&i.infoWindows[e].open(t,this)}))})})},destroy:function(){delete this.map,delete this.markers,delete this.infoWindows,this.$el.off(),this.$win.off("resize",o.proxy(this.refresh,this)),"function"==typeof this.callbacks.onDestroy&&this.callbacks.onDestroy.call(this)}},o.fn.tailorGoogleMap=function(e,t){return this.each(function(){var i=o.data(this,"tailorGoogleMap");i||o.data(this,"tailorGoogleMap",new n(this,e,t))})},t.exports=n},{}],35:[function(e,t,i){var n,o=window.jQuery;n=function(e,t,i){this.el=e,this.$el=o(e),this.$wrap=this.$el.find(".tailor-grid--masonry"),this.options=o.extend({},this.defaults,this.$el.data(),t),this.callbacks=o.extend({},this.callbacks,i),this.initialize()},n.prototype={defaults:{itemSelector:".tailor-grid__item"},callbacks:{onInitialize:function(){},onDestroy:function(){}},initialize:function(){this.shuffle(),"function"==typeof this.callbacks.onInitialize&&this.callbacks.onInitialize.call(this)},addEventListeners:function(){this.$el.on("before:element:refresh",o.proxy(this.maybeDestroy,this)).on("element:change:parent",o.proxy(this.refreshShuffle,this)).on("before:element:copy",o.proxy(this.maybeUnShuffle,this)).on("element:copy",o.proxy(this.maybeShuffle,this)).on("before:element:destroy",o.proxy(this.maybeDestroy,this)).on("element:parent:change",o.proxy(this.refreshShuffle,this))},maybeShuffle:function(e){e.target==this.el&&this.shuffle()},maybeRefreshShuffle:function(e){e.target==this.el&&this.refreshShuffle()},maybeUnShuffle:function(e){e.target==this.el&&this.unShuffle()},maybeDestroy:function(e){e.target==this.el&&this.destroy(e)},shuffle:function(){var e=this;this.$wrap.imagesLoaded(function(){e.$wrap.shuffle(e.options),e.addEventListeners()})},refreshShuffle:function(){this.$wrap.shuffle("update")},unShuffle:function(){this.$wrap.shuffle("destroy")},destroy:function(e){this.unShuffle(),this.$el.off(),"function"==typeof this.callbacks.onDestroy&&this.callbacks.onDestroy.call(this)}},o.fn.tailorMasonry=function(e,t){return this.each(function(){var i=o.data(this,"tailorMasonry");i||o.data(this,"tailorMasonry",new n(this,e,t))})}},{}],36:[function(e,t,i){var n,o=window.jQuery;n=function(e,t,i){this.el=e,this.$el=o(e),this.$wrap=this.$el.find(".tailor-slideshow__slides"),this.options=o.extend({},this.defaults,this.$el.data(),t),document.documentElement.dir&&"rtl"==document.documentElement.dir&&(this.options.rtl=!0),this.callbacks=o.extend({},this.callbacks,i),this.initialize()},n.prototype={defaults:{items:".tailor-slideshow__slide",prevArrow:'<button type="button" data-role="none" class="lick-prev" aria-label="Previous" tabindex="0" role="button"></button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button"></button>',adaptiveHeight:!0,draggable:!1,speed:250,slidesToShow:1,slidesToScroll:1,autoplay:!1,arrows:!1,dots:!1,fade:!0},callbacks:{onInitialize:function(){},onDestroy:function(){}},initialize:function(){this.slick(),"function"==typeof this.callbacks.onInitialize&&this.callbacks.onInitialize.call(this)},addEventListeners:function(){this.$el.on("before:element:refresh",o.proxy(this.unSlick,this)).on("element:change:parent",o.proxy(this.maybeRefreshSlick,this)).on("before:element:copy",o.proxy(this.unSlick,this)).on("element:copy",o.proxy(this.slick,this)).on("before:element:destroy",o.proxy(this.maybeDestroy,this)).on("element:parent:change",o.proxy(this.maybeRefreshSlick,this))},maybeSlick:function(e){e.target==this.el&&this.slick()},maybeRefreshSlick:function(e){e.target==this.el&&this.refreshSlick()},maybeUnSlick:function(e){e.target==this.el&&this.unSlick()},maybeDestroy:function(e){e.target==this.el&&this.destroy(e)},slick:function(){var e=this;this.$el.imagesLoaded(function(){e.addEventListeners(),e.$wrap.slick(e.options)})},refreshSlick:function(){this.$wrap.slick("refresh")},unSlick:function(){this.$wrap.slick("unslick")},destroy:function(e){this.$el.off(),this.unSlick(),"function"==typeof this.callbacks.onDestroy&&this.callbacks.onDestroy.call(this)}},o.fn.tailorSlideshow=function(e,t){return this.each(function(){var i=o.data(this,"tailorSlideshow");i||o.data(this,"tailorSlideshow",new n(this,e,t))})}},{}],37:[function(e,t,i){var n,o=window.jQuery;n=function(e,t,i){this.el=e,this.$el=o(e),this.options=o.extend({},this.defaults,this.$el.data(),t),this.callbacks=o.extend({},this.callbacks,i),this.initialize()},n.prototype={defaults:{tabs:".tailor-tabs__navigation .tailor-tabs__navigation-item",content:".tailor-tabs__content .tailor-tab",initial:1},callbacks:{onInitialize:function(){},onDestroy:function(){}},initialize:function(){this.querySelectors(),this.setActive(),this.addEventListeners(),"function"==typeof this.callbacks.onInitialize&&this.callbacks.onInitialize.call(this)},addEventListeners:function(){this.$el.on("before:element:refresh",o.proxy(this.maybeDestroy,this)).on("before:element:destroy",o.proxy(this.maybeDestroy,this)).on("element:child:add element:child:ready",o.proxy(this.onChangeChild,this)).on("element:child:refresh",o.proxy(this.onChangeChild,this)).on("element:child:destroy",o.proxy(this.onDestroyChild,this)).on("element:change:order",o.proxy(this.onReorderChild,this))},querySelectors:function(){this.$tabs&&this.$tabs.off(),this.$content=this.$el.find(this.options.content),this.$tabs=this.$el.find(this.options.tabs).on("click",o.proxy(this.onClick,this))},setActive:function(){var e,t=this.$content.filter(function(){return this.classList.contains("is-active")});if(0==t.length){var i=this.options.initial-1;this.$content[i]&&(e=this.$content[i])}else e=t[0];e&&this.activate(e.id)},onClick:function(e){this.activate(e.target.getAttribute("data-id")),e.preventDefault()},onChangeChild:function(e,t){e.target==this.el&&(this.querySelectors(),this.activate(t.el.id))},onReorderChild:function(e,t,i,n){if(e.target==this.el){var o=this.$content.filter(function(){return this.id==t});0>n-i?o.insertAfter(this.$content[i]):o.insertBefore(this.$content[i]),this.activate(t)}},onDestroyChild:function(e,t){if(e.target===this.el&&(0!=t.$el.index()||t.el.nextSibling)){var i=t.el.nextSibling?t.el.nextSibling.id:t.el.previousSibling.id;t.$el.remove(),this.querySelectors(),this.activate(i)}},activate:function(e){this.$tabs.each(function(){this.classList.toggle("is-active",this.getAttribute("data-id")==e)}),this.$content.each(function(){o(this).toggle(this.id==e).toggleClass("is-active",this.id==e).children().each(function(e,t){var i=o(t);i.trigger("element:parent:change",i)})})},maybeDestroy:function(e){e.target==this.el&&this.destroy(e)},destroy:function(e){this.$el.off(),this.$tabs.off(),"function"==typeof this.callbacks.onDestroy&&this.callbacks.onDestroy.call(this)}},o.fn.tailorTabs=function(e,t){return this.each(function(){var i=o.data(this,"tailorTabs");i||o.data(this,"tailorTabs",new n(this,e,t))})},t.exports=n},{}],38:[function(e,t,i){var n,o=window.jQuery;n=function(e,t,i){this.el=e,this.$el=o(e),this.options=o.extend({},this.defaults,this.$el.data(),t),this.callbacks=o.extend({},this.callbacks,i),this.initialize()},n.prototype={defaults:{toggles:".tailor-toggle__title",content:".tailor-toggle__body",accordion:!1,initial:-1,speed:150},callbacks:{onInitialize:function(){},onDestroy:function(){}},initialize:function(){this.querySelectors(),this.addEventListeners();var e=this.options.initial-1;this.$toggles[e]&&this.activate(this.$toggles[e]),"function"==typeof this.callbacks.onInitialize&&this.callbacks.onInitialize.call(this)},addEventListeners:function(){this.$el.on("before:element:refresh",o.proxy(this.maybeDestroy,this)).on("before:element:destroy",o.proxy(this.maybeDestroy,this)).on("element:child:add element:child:ready",o.proxy(this.onChangeChild,this)).on("element:child:refresh",o.proxy(this.onChangeChild,this)).on("element:child:destroy",o.proxy(this.onChangeChild,this))},querySelectors:function(){this.$content=this.$el.find(this.options.content),this.$toggles=this.$el.find(this.options.toggles).off().on("click",o.proxy(this.onClick,this))},onClick:function(e){this.activate(e.target),e.preventDefault()},onChangeChild:function(e,t){e.target==this.el&&this.querySelectors()},activate:function(e){var t=this.options.speed,i=o(e);this.options.accordion?(this.$toggles.filter(function(){return this!==e}).removeClass("is-active"),this.$content.each(function(){var i=o(this);e.nextElementSibling==this?i.slideToggle(t).children().each(function(e,t){var i=o(t);i.trigger("element:parent:change",i)}):i.slideUp(t)})):this.$content.filter(function(){return e.nextElementSibling==this}).slideToggle(t).each(function(){o(this).children().each(function(e,t){var i=o(t);i.trigger("element:parent:change",i)})}),i.toggleClass("is-active")},maybeDestroy:function(e){e.target==this.el&&this.destroy(e)},destroy:function(e){this.$el.off(),this.$toggles.off(),"function"==typeof this.callbacks.onDestroy&&this.callbacks.onDestroy.call(this)}},o.fn.tailorToggles=function(e,t){return this.each(function(){var i=o.data(this,"tailorToggles");i||o.data(this,"tailorToggles",new n(this,e,t))})},t.exports=n},{}],39:[function(e,t,i){Tailor.Collections=Tailor.Collections||{},Tailor.Collections.Element=e("./collections/elements"),Tailor.Collections.History=e("./collections/history"),t.exports=Marionette.Module.extend({onBeforeStart:function(e){var t=this,i={getElements:function(e){return e?t.elementCollection.findWhere({id:e}):t.elementCollection},getHistory:function(e){return e?t.historyCollection.findWhere({id:e}):t.historyCollection},resetElements:function(e){if(e!==t.elementCollection.models){var i,n=document.getElementById("canvas");n.classList.add("is-loading");var o={data:{models:JSON.stringify(e),nonce:window._nonces.reset},success:function(t){e=t.models,i=t.templates,app.channel.trigger("css:clear"),app.channel.trigger("css:add",t.css)},complete:function(o){i&&(jQuery("body").append(i),app.channel.trigger("before:elements:restore"),app.channel.trigger("canvas:reset"),t.elementCollection.reset(null),t.elementCollection.reset(e),app.channel.trigger("elements:restore")),n.classList.remove("is-loading")}};window.ajax.send("tailor_reset",o)}},loadTemplate:function(e,i,n){var o,s,r=document.getElementById("canvas");r.classList.add("is-loading");var a={data:{template_id:e.get("id"),nonce:window._nonces.loadTemplate},success:function(e){o=e.models,s=e.templates,jQuery("body").append(s),app.channel.trigger("css:add",e.css)},complete:function(a){if(s){var l=[],c=[];_.each(o,function(e){""==e.parent?l.push(e):c.push(e)}),t.elementCollection.add(c,{silent:!0}),l.length>1?t.elementCollection.add(l,{at:n+1}):(l[0].parent=i,l[0].order=n,t.elementCollection.add(l))}app.channel.trigger("template:add",e),r.classList.remove("is-loading")}};window.ajax.send("tailor_load_template",a)}};app.channel.reply("canvas:elements",i.getElements),app.channel.reply("sidebar:history",i.getHistory),app.channel.on("elements:reset",i.resetElements),app.channel.on("template:load",i.loadTemplate),this.elementCollection=new Tailor.Collections.Element(e.elements,{silent:!1}),this.historyCollection=new Tailor.Collections.History,this.l10n=e.l10n},onStart:function(e){this.addEventListeners()},addEventListeners:function(){this.listenTo(this.elementCollection,"change:atts",this.onEditAttributes),this.listenTo(app.channel,"element:add",this.onAddElement),this.listenTo(app.channel,"element:copy",this.onCopyElement),this.listenTo(app.channel,"element:move",this.onMoveElement),this.listenTo(app.channel,"modal:apply",this.onEditElement),this.listenTo(app.channel,"element:delete",this.onDeleteElement),this.listenTo(app.channel,"element:resize",this.onResizeElement),this.listenTo(app.channel,"element:change:order",this.onReorderElement),this.listenTo(app.channel,"template:add",this.onAddTemplate),this.listenTo(app.channel,"history:restore",this.restoreSnapshot),this.listenTo(app.channel,"history:undo",this.undoStep),this.listenTo(app.channel,"history:redo",this.redoStep)},onEditAttributes:function(e,t){e.previous("atts")!==e.get("atts")&&app.channel.trigger("element:edit",e)},onAddElement:function(e){"library"==e.get("collection")&&this.saveSnapshot(this.l10n.added+" "+e.get("label"))},onEditElement:function(e,t){this.saveSnapshot(this.l10n.edited+" "+t.get("label"))},onCopyElement:function(e){this.saveSnapshot(this.l10n.copied+" "+e.get("label"))},onMoveElement:function(e){this.saveSnapshot(this.l10n.moved+" "+e.get("label"))},onDeleteElement:function(e){this.saveSnapshot(this.l10n.deleted+" "+e.get("label"))},onResizeElement:function(e){this.saveSnapshot(this.l10n.resized+" "+e.get("label"))},onReorderElement:function(e){this.saveSnapshot(this.l10n.reordered+" "+e.get("label"))},onAddTemplate:function(e){this.saveSnapshot(this.l10n.added+" "+this.l10n.template+" - "+e.get("label"))},saveSnapshot:function(e){this.historyCollection.save(e)},restoreSnapshot:function(e){this.historyCollection.restore(e)},undoStep:function(){this.historyCollection.undo()},redoStep:function(){this.historyCollection.redo()}})},{"./collections/elements":40,"./collections/history":41}],40:[function(e,t,i){var n;Backbone.$;n=Backbone.Collection.extend({comparator:"order",model:function(e,t){var i=window.Tailor.Models.lookup(e.tag,e.type);return new i(e,t)},initialize:function(){this.addEventListeners()},addEventListeners:function(){this.listenTo(this,"change:parent",this.onChangeParent),this.listenTo(this,"add",this.onAdd),this.listenTo(this,"destroy",this.onDestroy),this.listenTo(this,"container:collapse",this.onCollapse),this.listenTo(this,"reset",this.onReset)},getParent:function(e){return this.findWhere({id:e.get("parent")})},getChildren:function(e){return this.where({parent:e.get("id")})},getSiblings:function(e){return this.where({parent:e.get("parent")})},hasSelectedParent:function(e){var t=app.channel.request("canvas:element:selected");if(!t||e===t)return!1;for(var i=e.get("parent"),n=this.findWhere({id:i});"undefined"!=typeof n;){if(t===n)return!0;i=n.get("parent"),n=this.get(i)}return!1},onChangeParent:function(e){var t=this.get(e.get("parent")),i=this.get(e.previous("parent"));this.sort({silent:!0}),this._checkParent(i),"tailor_column"===e.get("tag")&&(this._reBalanceColumns(t),this._reBalanceColumns(i))},onAdd:function(e,t,i){"tailor_column"==e.get("tag")&&i.rebalance&&this._reBalanceColumns(this.get(e.get("parent")))},onDestroy:function(e){var t=this.get(e.get("parent"));this._checkParent(t);var i=this.where({parent:e.get("id")});i.length&&_.each(i,function(e){e.trigger("destroy",e,this)},this),t&&"tailor_column"===e.get("tag")&&this._reBalanceColumns(t),0===this.length&&this.onEmpty()},onReset:function(){0===this.length&&this.onEmpty()},onEmpty:function(){var e=this.createSection(0);this.create([{tag:"tailor_content",atts:{},parent:e.get("id"),order:0}])},onCollapse:function(e,t){var i=e.get("parent");_.each(t,function(e){e.set("parent",i)},this)},_reBalanceColumns:function(e){var t=this.where({parent:e.get("id")}),i=t.length;_.each(t,function(t){var n=_.clone(t.get("atts"));n.width=12/i,t.set("atts",n,{silent:!0}),t.trigger("change:width",e,n.width)},this)},_checkParent:function(e){e&&("container"==e.get("type")&&this._checkCollapsibleContainer(e),this._checkChildren(e))},_checkCollapsibleContainer:function(e){var t=this.getLibrary().findWhere({tag:e.get("tag")}).get("child"),i=e.get("id"),n=this.filter(function(e){return i===e.get("parent")&&t===e.get("tag")});if(0===n.length)e.trigger("container:collapse",e,this.where({parent:i}));else if(1===n.length){var o=_.first(n);"tailor_row"===e.get("tag")&&o.trigger("container:collapse",o,this.where({parent:o.get("id")}))}},_checkChildren:function(e){var t=this.where({parent:e.get("id")});0===t.length&&e.trigger("destroy",e)},create:function(e,t){return t=t||{},e=_.isArray(e)?_.each(e,this.applyDefaults,this):this.applyDefaults(e),this.add(e,t)},getLibrary:function(){return this.library||app.channel.request("sidebar:library")},applyDefaults:function(e){var t=this.getLibrary().findWhere({tag:e.tag}),i=(t.get("label"),{label:t.get("label"),type:t.get("type"),child:t.get("child")});return e.atts=e.atts||{},_.each(t.get("settings"),function(t){e.atts[t.id]=e.atts[t.id]||t.value},this),_.extend(e,i)},createSection:function(e){return _.first(this.create([{tag:"tailor_section",label:this.getLibrary().findWhere({tag:"tailor_section"}).get("label"),order:e}],{at:e}))},createRow:function(e,t){var i=_.first(this.create([{tag:"tailor_row",parent:e,order:t}],{}));return this.create([{tag:"tailor_column",atts:{width:6},parent:i.get("id"),order:0},{tag:"tailor_column",atts:{width:6},parent:i.get("id"),order:1}])},createColumn:function(e,t){var i=this.where({parent:e}),n=_.first(this.create([{tag:"tailor_column",atts:{width:12/(i.length+1)},parent:e,order:t}],{rebalance:!0}));return n},insertChild:function(e,t){e&&(e.get("parent")!==t.get("id")&&e.trigger("remove:child"),t.trigger("insert",e),e.trigger("add:child"),e.set("parent",t.get("id")))},createContainer:function(e,t,i,n){var o=e.get("tag"),s=_.first(this.create([{tag:o,parent:t,order:i}],{at:i,silent:!0})),r=e.get("child"),a=this.getLibrary().findWhere({tag:r}).get("label"),l=this.create([{tag:r,label:a,atts:{},parent:s.get("id"),order:0},{tag:r,label:a,atts:{},parent:s.get("id"),order:1}],{silent:!0});n&&(_.first(n).set("parent",_.first(l).get("id"),{silent:!0}),_.last(n).set("parent",_.last(l).get("id"),{silent:!0})),this.trigger("add",s,this,{})},createWrapper:function(e,t,i,n){var o=_.first(this.create([{tag:e,parent:t,order:i}],{silent:!0}));return"undefined"==typeof n&&this.create([{tag:"tailor_content",atts:{},parent:o.get("id"),order:0}],{silent:!0}),this.trigger("add",o,this,{}),"undefined"!=typeof n&&this.insertChild(n,o),o}}),t.exports=n},{}],41:[function(e,t,i){var n;Backbone.$;n=Backbone.Collection.extend({maxSize:50,active:null,comparator:function(e){return-e.get("timestamp")},initialize:function(){this.elements=app.channel.request("canvas:elements"),this.addEventListeners(),this.save(window._l10n.initialized)},addEventListeners:function(){this.listenTo(this,"add",this.checkLength)},save:function(e){if(this.active){var t=this.indexOf(this.active);t>0&&this.remove(this.slice(0,t))}var i=this.add({label:e||"",elements:this.elements?this.elements.toJSON():[],time:this.getTime(),timestamp:_.now()});this.setActive(i)},getTime:function(){var e,t=new Date,i=t.getHours(),n=":";return i>12?(i-=12,e=" PM"):e=" AM",i+n+("0"+t.getMinutes()).slice(-2)+n+("0"+t.getSeconds()).slice(-2)+e},restore:function(e){var t=this.findWhere({timestamp:e});if(t&&t!==this.getActive()){this.setActive(t);var i=t.get("elements");app.channel.trigger("elements:reset",i)}},undo:function(){if(this.length){var e=this.at(this.indexOf(this.getActive())+1);e&&this.restore(e.get("timestamp"))}},redo:function(){if(this.length){var e=this.at(this.indexOf(this.getActive())-1);e&&this.restore(e.get("timestamp"))}},checkLength:function(){this.length>this.maxSize&&this.pop()},setActive:function(e){this.active=e,this.trigger("change:active",e)},getActive:function(){return this.active}}),t.exports=n},{}],42:[function(e,t,i){var n,o=(Backbone.$,e("./../model-child"));n=o.extend({validTarget:function(e,t){if(_.contains(["tailor_section","tailor_row"],e.get("tag"))||!_.contains(["left","right"],t))return!1;if("child"==e.get("type")&&e.get("tag")!=this.get("tag"))return!1;var i=this.collection.getSiblings(this);return e.get("parent")==this.get("parent")||i.length<4}}),t.exports=n},{"./../model-child":49}],43:[function(e,t,i){var n,o=(Backbone.$,e("./../model-child"));n=o.extend({validTarget:function(e,t){if("tailor_section"==e.get("tag")||_.contains(["top","bottom","center"],t))return!1;var i=this.collection.getParent(this);return i.get("tag")==e.get("tag")?!1:e.get("tag")==this.get("tag")}}),t.exports=n},{"./../model-child":49}],44:[function(e,t,i){var n,o=(Backbone.$,e("./../model-container"));n=o.extend({createTemplate:function(e,t){var i=t.el.classList.contains("is-editing");this.beforeCopyElement(t);var n=t.getChildViewContainer(t),o=n.contents().detach(),s=t.$el.find(".slick-dots").detach();this.appendTemplate(e,t),n.append(o),s.insertAfter(n),this.afterCopyElement(e,t),i&&t.el.classList.add("is-editing")}}),t.exports=n},{"./../model-container":51}],45:[function(e,t,i){var n,o=(Backbone.$,e("./../model-container"));n=o.extend({validTarget:function(e,t){return"child"==e.get("type")||"tailor_section"==e.get("tag")||"center"==t?!1:_.contains(["top","bottom"],t)&&"tailor_column"!=e.get("tag");
}}),t.exports=n},{"./../model-container":51}],46:[function(e,t,i){var n,o=(Backbone.$,e("./../model-container"));n=o.extend({createTemplate:function(e,t){var i=t.el.classList.contains("is-editing");this.beforeCopyElement(t);var n=t.getChildViewContainer(t),o=n.contents().detach(),s=t.$el.find(".tailor-tabs__navigation"),r=s.children().detach();this.appendTemplate(e,t),n.append(o),s.append(r),this.afterCopyElement(e,t),i&&t.el.classList.add("is-editing")}}),t.exports=n},{"./../model-container":51}],47:[function(e,t,i){var n,o=(Backbone.$,e("./model-base"));n=o.extend({validTarget:function(e,t){if("child"==e.get("type")||_.contains(["tailor_section","tailor_column"],e.get("tag"))||"center"==t)return!1;var i=this.collection.getParent(this);return"tailor_row"==e.get("tag")?"tailor_section"==i.get("tag")&&_.contains(["top","bottom"],t):"child"==i.get("type")&&"tailor_column"!=i.get("tag")?"container"!=e.get("type")&&!_.contains(["left","right"],t):_.contains(["wrapper","child"],i.get("type"))?_.contains(["top","bottom"],t)?_.contains(["tailor_section","tailor_column"],i.get("tag"))||!_.contains(["container","wrapper","child"],e.get("type")):"tailor_section"==i.get("tag")||!_.contains(["left","right"],t):!0},initialize:function(){this.addEventListeners()},addEventListeners:function(){this.listenTo(this,"element:move:top",this.insertBefore),this.listenTo(this,"element:move:bottom",this.insertAfter),this.listenTo(this,"element:move:left",this.columnBefore),this.listenTo(this,"element:move:right",this.columnAfter),this.listenTo(this,"element:copy:top",this.copyBefore),this.listenTo(this,"element:copy:bottom",this.copyAfter),this.listenTo(this,"element:copy:left",this.copyColumnBefore),this.listenTo(this,"element:copy:right",this.copyColumnAfter),this.listenTo(this,"element:move:center",this.createChild),this.listenTo(this,"element:copy:center",this.copyChild)},copyBefore:function(e,t){var i=t.model.clone(),n=e.model.get("order")-1;i.set("id",i.cid),i.set("parent",e.model.get("parent")),i.set("order",n),this.createTemplate(i.cid,t),this.collection.add(i)},copyAfter:function(e,t){var i=t.model.clone(),n=e.model.get("order");i.set("id",i.cid),i.set("parent",e.model.get("parent")),i.set("order",n),this.createTemplate(i.cid,t),this.collection.add(i)},copyColumnBefore:function(e,t){var i=e.model,n=t.model.clone();if(n.set("id",n.cid),this.createTemplate(n.cid,t),"tailor_column"===i.get("tag")){var o=this.collection.createColumn(i.get("parent"),i.get("order")-1);n.set("parent",o.get("id")),this.collection.add(n)}else{var s=this.collection.createRow(i.get("parent"),i.get("order"));this.collection.insertChild(i,_.last(s)),n.set("parent",_.first(s).get("id")),this.collection.add(n)}},copyColumnAfter:function(e,t){var i=e.model,n=t.model.clone();if(n.set("id",n.cid),this.createTemplate(n.cid,t),"tailor_column"===i.get("tag")){var o=this.collection.createColumn(i.get("parent"),i.get("order"));n.set("parent",o.get("id")),this.collection.add(n)}else{var s=this.collection.createRow(i.get("parent"),i.get("order"));this.collection.insertChild(i,_.first(s)),n.set("parent",_.last(s).get("id")),this.collection.add(n)}},createChild:function(e,t){var i=e.model.get("id"),n=e.model.get("child"),o=this.collection.where({parent:i,tag:n}).length;this.appendTemplate(t.model.get("id"),t),this.collection.createWrapper(n,i,o,t.model)},copyChild:function(e,t){var i=e.model.get("id"),n=e.model.get("child"),o=this.collection.where({parent:i,tag:n}).length,s=this.collection.createWrapper(n,i,o,!1),r=t.model.clone();r.set("id",r.cid),r.set("parent",s.get("id")),r.set("order",0),this.createTemplate(r.cid,t),this.collection.add(r)},createTemplate:function(e,t){var i=t.el.classList.contains("is-editing");this.beforeCopyElement(t),this.appendTemplate(e,t),this.afterCopyElement(e,t),i&&t.el.classList.add("is-editing")}}),t.exports=n},{"./model-base":48}],48:[function(e,t,i){Backbone.Model.prototype.set=_.wrap(Backbone.Model.prototype.set,function(e,t,i,n){if(null==t)return this;var o;"object"==typeof t?(o=t,n=i):(o={})[t]=i,n||(n={});var s=e.call(this,o,n);return this._tracking&&_.each(o,_.bind(function(e,t){_.isEqual(this._original[t],e)?delete this._unsaved[t]:this._unsaved[t]=e},this)),s});var n=Backbone.Model.extend({_tracking:!1,_original:{},_unsaved:{},defaults:function(){return{id:this.cid,tag:"",label:"",atts:{},parent:"",order:0,collection:"element"}},isTracking:function(){return this._tracking},startTracking:function(){return this._tracking=!0,this.resetTracking(),this},stopTracking:function(){return this._tracking=!1,this._original={},this._unsaved={},this},resetTracking:function(){return this._original=_.clone(this.attributes),this._unsaved={},this},resetAttributes:function(){return this._tracking?(this.attributes=this._original,this.resetTracking(),this.trigger("change:atts",this,this.get("atts")),this):void 0},toShortcode:function(){var e=this.get("tag"),t=this.get("atts"),i="",n="["+e;return _.each(t,function(e,t){e&&("content"===t?i=e:n+=_.isNumber(t)?/\s/.test(e)?' "'+e+'"':" "+e:" "+t+'="'+e+'"')},this),n+"]"+i+"[/"+e+"]"},insertBefore:function(e){this.trigger("remove:child"),this.trigger("insert:before",e),this.trigger("add:child"),this.set("parent",e.model.get("parent"))},insertAfter:function(e){this.trigger("remove:child"),this.trigger("insert:after",e),this.trigger("add:child"),this.set("parent",e.model.get("parent"))},columnBefore:function(e){var t=e.model,i=t.get("parent");if("tailor_column"===t.get("tag")){var n=this.collection.createColumn(i,t.get("order")-1);this.collection.insertChild(this,n)}else{var o=this.collection.createRow(i,t.get("order"));this.collection.insertChild(this,_.first(o)),this.collection.insertChild(t,_.last(o))}},columnAfter:function(e){var t=e.model,i=t.get("parent");if("tailor_column"===t.get("tag")){var n=this.collection.createColumn(i,t.get("order"));this.collection.insertChild(this,n)}else{var o=this.collection.createRow(i,t.get("order"));this.collection.insertChild(t,_.first(o)),this.collection.insertChild(this,_.last(o))}},beforeCopyElement:function(e){var t=e.el;e.triggerAll("before:element:copy",e),t.classList.remove("is-dragging"),t.classList.remove("is-hovering"),t.classList.remove("is-selected"),t.classList.remove("is-editing")},appendTemplate:function(e,t){var i=t.model.get("id"),n=document.createElement("script");n.setAttribute("type","text/html"),n.id="tmpl-tailor-"+e,n.innerHTML=t.el.outerHTML.replace(i,e),document.body.appendChild(n)},afterCopyElement:function(e,t){var i=t.model.get("id");t.$el.trigger("element:copy",t),app.channel.trigger("css:copy",i,e)}});t.exports=n},{}],49:[function(e,t,i){var n,o=(Backbone.$,e("./model-composite"));n=o.extend({validTarget:function(e,t){if("tailor_section"==e.get("tag")||_.contains(["left","right","center"],t))return!1;var i=this.collection.getParent(this);return i.get("tag")==e.get("tag")?!1:e.get("tag")==this.get("tag")},initialize:function(){this.addEventListeners()},addEventListeners:function(){this.listenTo(this,"element:move:top",this.insertBefore),this.listenTo(this,"element:move:bottom",this.insertAfter),this.listenTo(this,"element:move:left",this.insertBefore),this.listenTo(this,"element:move:right",this.insertAfter),this.listenTo(this,"element:copy:top",this.copyBefore),this.listenTo(this,"element:copy:bottom",this.copyAfter),this.listenTo(this,"element:copy:left",this.copyBefore),this.listenTo(this,"element:copy:right",this.copyAfter)}}),t.exports=n},{"./model-composite":50}],50:[function(e,t,i){var n,o=(Backbone.$,e("./model-base"));n=o.extend({cloneContainer:function(e,t,i){var n=this.collection,o=e.model.clone();o.set("id",o.cid),o.set("parent",t),o.set("order",i),this.createTemplate(o.cid,e);var s=this.cloneChildren(e.children,o,[]);n.add(s,{silent:!0}),n.add(o),e.triggerMethod("element:refresh")},cloneChildren:function(e,t,i){return e.length&&e.each(function(e){var n=e.model.clone();n.set("id",n.cid),n.set("parent",t.get("id")),n.createTemplate(n.cid,e),i.push(n),e.children&&this.cloneChildren(e.children,n,i)},this),i},copyBefore:function(e,t){this.cloneContainer(t,e.model.get("parent"),e.model.get("order")-1)},copyAfter:function(e,t){this.cloneContainer(t,e.model.get("parent"),e.model.get("order"))},copyColumnBefore:function(e,t){var i=e.model.get("parent");if("tailor_column"===e.model.get("tag")){var n=this.collection.createColumn(i,e.model.get("order")-1);this.cloneContainer(t,n.get("id"),0)}else{var o=this.collection.createRow(i,e.model.get("order"));this.collection.insertChild(e.model,_.last(o)),this.cloneContainer(t,_.first(o).get("id"),0)}},copyColumnAfter:function(e,t){var i=e.model.get("parent");if("tailor_column"===e.model.get("tag")){var n=this.collection.createColumn(i,e.model.get("order"));this.cloneContainer(t,n.get("id"),0)}else{var o=this.collection.createRow(i,e.model.get("order"));this.collection.insertChild(e.model,_.first(o)),this.cloneContainer(t,_.last(o).get("id"),0)}},createTemplate:function(e,t){var i=t.el.classList.contains("is-editing");this.beforeCopyElement(t);var n=t.getChildViewContainer(t),o=n.contents().detach();this.appendTemplate(e,t),n.append(o),this.afterCopyElement(e,t),i&&t.el.classList.add("is-editing")}}),t.exports=n},{"./model-base":48}],51:[function(e,t,i){var n,o=(Backbone.$,e("./model-composite"));n=o.extend({validTarget:function(e,t){if("child"==e.get("type")||_.contains(["tailor_section","tailor_column"],e.get("tag")))return!1;var i=this.collection.getParent(this);return"tailor_row"==e.get("tag")?"tailor_section"==i.get("tag")&&_.contains(["top","bottom"],t):"center"==t?"container"!=e.get("type"):_.contains(["wrapper","child"],i.get("type"))?_.contains(["top","bottom"],t)?_.contains(["tailor_section","tailor_column"],i.get("tag"))||!_.contains(["container","wrapper","child"],e.get("type")):"tailor_section"==i.get("tag")||!_.contains(["left","right"],t):"container"!=e.get("type")},initialize:function(){this.addEventListeners()},addEventListeners:function(){this.listenTo(this,"element:move:top",this.insertBefore),this.listenTo(this,"element:move:bottom",this.insertAfter),this.listenTo(this,"element:move:left",this.columnBefore),this.listenTo(this,"element:move:right",this.columnAfter),this.listenTo(this,"element:copy:top",this.copyBefore),this.listenTo(this,"element:copy:bottom",this.copyAfter),this.listenTo(this,"element:copy:left",this.copyColumnBefore),this.listenTo(this,"element:copy:right",this.copyColumnAfter)}}),t.exports=n},{"./model-composite":50}],52:[function(e,t,i){var n,o=(Backbone.$,e("./model-composite"));n=o.extend({validTarget:function(e,t){if("child"==e.get("type")||_.contains(["tailor_section","tailor_column"],e.get("tag"))||"center"==t)return!1;var i=this.collection.getParent(this);return"tailor_row"==e.get("tag")?"tailor_section"==i.get("tag")&&_.contains(["top","bottom"],t):"child"==i.get("type")&&"tailor_column"!=i.get("tag")?"container"!=e.get("type")&&!_.contains(["left","right"],t):_.contains(["container","wrapper","child"],i.get("type"))?"tailor_section"==i.get("tag")||!_.contains(["left","right"],t):!0},initialize:function(){this.addEventListeners()},addEventListeners:function(){this.listenTo(this,"element:move:top",this.insertBefore),this.listenTo(this,"element:move:bottom",this.insertAfter),this.listenTo(this,"element:move:left",this.columnBefore),this.listenTo(this,"element:move:right",this.columnAfter),this.listenTo(this,"element:copy:top",this.copyBefore),this.listenTo(this,"element:copy:bottom",this.copyAfter),this.listenTo(this,"element:copy:left",this.copyColumnBefore),this.listenTo(this,"element:copy:right",this.copyColumnAfter),this.listenTo(this,"element:move:center",this.createChild),this.listenTo(this,"element:copy:center",this.copyChild)},createChild:function(e,t){var i=e.model.get("id"),n=e.model.get("child"),o=this.collection.where({parent:i,tag:n}).length;this.createTemplate(t.model.get("id"),t),this.collection.createWrapper(n,i,o,t.model)},copyChild:function(e,t){var i=e.model.get("id"),n=e.model.get("child"),o=this.collection.where({parent:i,tag:n}).length,s=this.collection.createWrapper(n,i,o,!1);this.cloneContainer(t,s.get("id"),0)}}),t.exports=n},{"./model-composite":50}],53:[function(e,t,i){var n,o=(Backbone.$,e("./../model-wrapper"));n=o.extend({validTarget:function(e,t){return"tailor_section"==e.get("tag")&&!_.contains(["left","right","center"],t)}}),t.exports=n},{"./../model-wrapper":52}],54:[function(e,t,i){t.exports=Marionette.Module.extend({onStart:function(){this._model=null,this._isDragging=!1,this.addEventListeners(),this.showCanvas()},addEventListeners:function(){this.listenTo(app.channel,"canvas:dragstart",this.onDragStart),this.listenTo(app.channel,"canvas:dragover",this.onDragOver),this.listenTo(app.channel,"canvas:dragend",this.onDragEnd),this.listenTo(app.channel,"canvas:drop",this.onDrop)},showCanvas:function(){this.collection=app.channel.request("canvas:elements");var t=e("./canvas/canvas");app.canvasRegion.show(new t({collection:this.collection}))},onDragStart:function(e,t){var i=t.model.collection;if("function"!=typeof i.hasSelectedParent||!i.hasSelectedParent(t.model)){if(this._view=t,this._model=t.model,this._isDragging=!0,t.el.classList.add("is-dragging"),"element"==t.model.get("collection")){var n=window.DataTransfer||window.Clipboard;if("setDragImage"in n.prototype){var o=document.createElement("img");o.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",e.dataTransfer.setDragImage(o,0,0)}}e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setData("Text",this._model.cid),e.stopPropagation()}},onDragOver:function(e,t){if(this._isDragging){if(e.pageY){var i=window.scrollY||document.documentElement.scrollTop;e.pageY-i<40?window.scrollTo(0,i-20):i+window.innerHeight-e.pageY<40&&window.scrollTo(0,i+20)}var n="element"===this._model.get("collection")&&e.shiftKey?"copy":"move";if("move"===n&&t.model===this._model)return this.reset(),void e.stopPropagation();var o=this._getDropRegion(e,t);t.model.validTarget(this._model,o)&&(e.dataTransfer.dropEffect=n,app.channel.trigger("canvas:guide",t,o),e.preventDefault(),e.stopPropagation())}},onDrop:function(e,t){if(this._isDragging){var i=this._model,n=this._getDropRegion(e,t);if(t.model.validTarget(i,n)){var o;if("element"===i.get("collection")){if(o=e.shiftKey?"copy":"move","move"===o&&t.model===i)return}else o="add";i.trigger("element:"+o+":"+n,t,this._view),app.channel.trigger("element:"+o,i),this.collection.sort({silent:!0}),e.preventDefault(),e.stopPropagation()}}},onDragEnd:function(e,t){this._isDragging&&(this._isDragging=!1,this._view.el.classList.remove("is-dragging"),this.reset(),app.channel.trigger("debug"))},reset:function(){app.channel.trigger("canvas:reset")},_getPoint:function(e){return e.targetTouches?{x:e.targetTouches[0].clientX,y:e.targetTouches[0].clientY}:{x:e.clientX,y:e.clientY}},_getDropRegion:function(e,t){var i=this._getPoint(e),n=t.el.getBoundingClientRect(),o=n.width/2,s=n.height/2,r=n.top+(n.height-s)/2,a=n.left+(n.width-o)/2;if(a<=i.x&&i.x<=a+o&&r<=i.y&&i.y<=r+s)return"center";var l=(i.x-(n.left+o))/o,c=(i.y-(n.top+s))/s;return Math.abs(l)>Math.abs(c)?l>0?"right":"left":c>0?"bottom":"top"}})},{"./canvas/canvas":56}],55:[function(e,t,i){t.exports=Backbone.Marionette.Region.extend({initialize:function(){this.listenTo(app.channel,"canvas:dragstart",this.onDragStart),this.listenTo(app.channel,"canvas:dragend",this.onDragEnd)},onDragStart:function(e,t,i){this.el.classList.add("is-active")},onDragEnd:function(e,t,i){this.el.classList.remove("is-active")}})},{}],56:[function(e,t,i){t.exports=Marionette.CollectionView.extend({behaviors:{Container:{}},getChildView:function(e){return window.Tailor.Views.lookup("TailorSection")},buildChildView:function(e,t,i){var n=_.extend({model:e,collection:this.collection},i);return new t(n)},filter:function(e,t,i){return!e.get("parent")},_updateIndices:function(e,t,i){t&&(e._index=i,e.model._changing=!1,e.model.set("order",i)),this.children.each(function(i){i._index>=e._index&&(i._index+=t?1:-1,i.model.set("order",i._index))},this)}})},{}],57:[function(e,t,i){t.exports=Marionette.Module.extend({onStart:function(e){this.stylesheets=[],this.createSheets(e.mediaQueries||{}),this.addRules(e.cssRules||{}),this.addEventListeners()},addEventListeners:function(){var e=app.channel.request("canvas:elements");this.listenTo(e,"destroy",this.onDestroy),this.listenTo(app.channel,"css:add",this.addRules),this.listenTo(app.channel,"css:update",this.updateRules),this.listenTo(app.channel,"css:delete",this.deleteRules),this.listenTo(app.channel,"css:clear",this.clearRules),this.listenTo(app.channel,"css:copy",this.copyRules)},createSheets:function(t){var i=e("./stylesheet/stylesheet");_.each(t,function(e,t){""!=e.min?""!=e.max?(this.stylesheets[t]=new i(t,"only screen and (min-width: "+e.min+") and (max-width: "+e.max+")"),this.stylesheets[t+"-up"]=new i(t+"-up","only screen and (min-width: "+e.min+")")):this.stylesheets[t]=new i(t,"only screen and (min-width: "+e.min+")"):""!=e.max?this.stylesheets[t]=new i(t,"only screen and (max-width: "+e.max+")"):this.stylesheets[t]=new i(t,"only screen")},this)},onDestroy:function(e){this.deleteRules(e.get("id"))},addRules:function(e){_.each(e,function(e,t){t in this.stylesheets&&this.stylesheets[t].addRules(e)},this)},clearRules:function(){for(var e in this.stylesheets)this.stylesheets.hasOwnProperty(e)&&this.stylesheets[e].clearRules()},copyRules:function(e,t){for(var i in this.stylesheets)if(this.stylesheets.hasOwnProperty(i)){var n=this.stylesheets[i].copyRules("tailor-"+e,"tailor-"+t);if(n.length){var o={};o[i]={},o[i][t]=n,this.addRules(o)}}},deleteRules:function(e){for(var t in this.stylesheets)this.stylesheets.hasOwnProperty(t)&&this.stylesheets[t].deleteRules("tailor-"+e)},updateRules:function(e,t){this.deleteRules(e),this.addRules(t)}})},{"./stylesheet/stylesheet":58}],58:[function(e,t,i){function n(e,t){this.id=e,this.elements=[],this.initialize(t)}n.prototype={initialize:function(e){this.stylesheet=this.createStylesheet(e),this.sheet=this.stylesheet.sheet},createStylesheet:function(e){var t=document.createElement("style");return t.appendChild(document.createTextNode("")),e=e||"screen",t.setAttribute("media",e),t.setAttribute("id","tailor-"+this.id),document.head.appendChild(t),t},addRules:function(e){_.each(e,function(e,t){e.forEach(function(e){"selectors"in e&&"declarations"in e&&Tailor.CSS.addRule(this.sheet,e.selectors,e.declarations,"tailor-"+t)},this)},this)},copyRules:function(e,t){for(var i=[],n=0;n<this.sheet.cssRules.length;n++){var o=this.sheet.cssRules[n];o.selectorText&&o.selectorText.indexOf(e)>-1&&i.push({selectors:o.selectorText.replace(new RegExp(e,"g"),t),declarations:o.style.cssText})}return i},deleteRules:function(e){for(var t=0;t<this.sheet.cssRules.length;t++){var i=this.sheet.cssRules[t];i.selectorText&&i.selectorText.indexOf(e)>-1&&(Tailor.CSS.deleteRule(this.sheet,t),t--)}},clearRules:function(){for(var e=0;e<this.sheet.cssRules.length;e++)Tailor.CSS.deleteRule(this.sheet,e),e--}},t.exports=n},{}],59:[function(e,t,i){t.exports=Marionette.Module.extend({onStart:function(){var t=e("./tools/show/guide"),i=e("./tools/show/select"),n=new t({el:"#guide"});n.render();var o={positionGuide:function(e,t){n.position(e,t)},selectElement:function(e){app.selectRegion.show(new i({model:e.model,collection:app.channel.request("canvas:elements"),view:e}))},resetGuide:function(){n.reset(),app.selectRegion.empty()},getSelectedElement:function(){var e=app.selectRegion.currentView;return e?e.model:null}};this.listenTo(app.channel,"canvas:guide",o.positionGuide),this.listenTo(app.channel,"canvas:select",o.selectElement),this.listenTo(app.channel,"canvas:reset element:refresh:template",o.resetGuide),app.channel.reply("canvas:element:selected",o.getSelectedElement)}})},{"./tools/show/guide":61,"./tools/show/select":63}],60:[function(e,t,i){t.exports=Backbone.Marionette.Region.extend({onShow:function(e,t,i){e._view.el.classList.add("is-selected")},onEmpty:function(e,t,i){e._view.el.classList.remove("is-selected")}})},{}],61:[function(e,t,i){t.exports=Marionette.ItemView.extend({template:!1,position:function(e,t){var i=e.$el,n=i.offset(),o=this.$el.offsetParent().offset();this.el.style.visibility="visible",this.el.className="guide guide--"+t+" guide--"+e.model.get("tag"),this.el.style.left=n.left-o.left+"px",this.el.style.top=n.top-o.top+"px",this.el.style.width=i.outerWidth()+"px",this.el.style.height=i.outerHeight()+"px",this.el.style.opacity=1},reset:function(){this.el.style.visibility="hidden",this.el.style.opacity=0}})},{}],62:[function(e,t,i){t.exports=Marionette.ItemView.extend({tagName:"a",className:"select__item",events:{click:"onClick"},getTemplate:function(){return _.template("<%= label %>")},onClick:function(e){0===this._index?this.triggerMethod("toggle"):this.model.trigger("select"),e.stopPropagation()}})},{}],63:[function(e,t,i){t.exports=Marionette.CompositeView.extend({className:"select",childView:e("./menu-item"),childViewContainer:".select__menu",ui:{edit:".js-edit","delete":".js-delete"},events:{"click @ui.edit":"editElement","click @ui.delete":"deleteElement"},childEvents:{toggle:"toggleMenu"},template:"#tmpl-tailor-tools-select",serializeData:function(){var e=Backbone.Marionette.CompositeView.prototype.serializeData.apply(this,arguments);return e.siblings=this.collection.where({parent:this.model.get("parent")}).length,e},initialize:function(e){this._view=e.view,this._model=this._view.model},_filteredSortedModels:function(){for(var e=[],t=this.model;"undefined"!=typeof t;)e.push(t),t=this.collection.get(t.get("parent"));return e},onDomRefresh:function(){var e=this.el.parentNode.getBoundingClientRect(),t=this._view.el.getBoundingClientRect();this.el.style.top=t.top-e.top+"px",this.el.style.left=t.left-e.left+"px",this.el.style.width=t.width+"px",this.el.style.height=t.height+"px"},editElement:function(){app.channel.trigger("modal:open",this.model)},deleteElement:function(){this.model.trigger("destroy",this.model),app.channel.trigger("element:delete",this.model)},toggleMenu:function(){this.$el.toggleClass("is-expanded")}})},{"./menu-item":62}],64:[function(e,t,i){var n,o=jQuery,n={url:window.ajaxurl,post:function(e,t){return ajax.send({data:_.isObject(e)?e:_.extend(t||{},{action:e})})},send:function(e,t){return _.isObject(e)?t=e:(t=t||{},t.data=_.extend(t.data||{},{action:e,tailor:1})),t=_.defaults(t||{},{type:"POST",url:ajax.url,context:this}),o.Deferred(function(e){t.success&&e.done(t.success);var i=t.error?t.error:ajax.onError;e.fail(i),delete t.success,delete t.error,o.ajax(t).done(function(t){("1"===t||1===t)&&(t={success:!0}),_.isObject(t)&&!_.isUndefined(t.success)?e[t.success?"resolveWith":"rejectWith"](this,[t.data]):e.rejectWith(this,[t])}).fail(function(){e.rejectWith(this,arguments)})}).promise()},onError:function(e){e&&e.hasOwnProperty("message")?Tailor.Notify(e.message):"0"==e?Tailor.Notify(window._l10n.expired):"-1"==e?Tailor.Notify(window._l10n.invalid):Tailor.Notify(window._l10n.error)}};t.exports=n},{}],65:[function(e,t,i){var n;Backbone.$;n={addRule:function(e,t,i,n){var o=Tailor.CSS.parseSelectors(t,n),s=Tailor.CSS.parseDeclarations(i);"insertRule"in e?e.insertRule(o+" {"+s+"}",e.cssRules.length):"addRule"in e&&e.addRule(o,s,e.cssRules.length)},deleteRule:function(e,t){"deleteRule"in e?e.deleteRule(t):"removeRule"in e&&e.removeRule(t)},parseSelectors:function(e,t){if(_.isString(e))return e;var i,n=t?"."+t:"";return e.length?(n&&(e=e.map(function(e){return e=e.indexOf("&")>-1?e.replace("&",n):":"==e.charAt(0)?n+e:n+" "+e})),i=".tailor-ui "+e.join(",.tailor-ui ")):i=n?".tailor-ui "+n:"",i},parseDeclarations:function(e){if(_.isString(e))return e;var t="";return _.each(e,function(e,i){t+=i+":"+e+";"}),t}},t.exports=n},{}],66:[function(e,t,i){!function(){function e(e){this.el=e;for(var t=e.className.replace(/^\s+|\s+$/g,"").split(/\s+/),i=0;i<t.length;i++)n.call(this,t[i])}function t(e,t,i){Object.defineProperty?Object.defineProperty(e,t,{get:i}):e.__defineGetter__(t,i)}if(!("undefined"==typeof window.Element||"classList"in document.documentElement)){var i=Array.prototype,n=i.push,o=i.splice,s=i.join;e.prototype={add:function(e){this.contains(e)||(n.call(this,e),this.el.className=this.toString())},contains:function(e){return-1!=this.el.className.indexOf(e)},item:function(e){return this[e]||null},remove:function(e){if(this.contains(e)){for(var t=0;t<this.length&&this[t]!=e;t++);o.call(this,t,1),this.el.className=this.toString()}},toString:function(){return s.call(this," ")},toggle:function(e){return this.contains(e)?this.remove(e):this.add(e),this.contains(e)}},window.DOMTokenList=e,t(Element.prototype,"classList",function(){return new e(this)})}}()},{}],67:[function(e,t,i){!function(e){"use strict";for(var t=0,i=["ms","moz","webkit","o"],n=0;n<i.length&&!e.requestAnimationFrame;++n)e.requestAnimationFrame=e[i[n]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[i[n]+"CancelAnimationFrame"]||e[i[n]+"CancelRequestAnimationFrame"];e.requestAnimationFrame||(e.requestAnimationFrame=function(i,n){var o=(new Date).getTime(),s=Math.max(0,16-(o-t)),r=e.setTimeout(function(){i(o+s)},s);return t=o+s,r}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(e){clearTimeout(e)})}(window)},{}]},{},[6]);